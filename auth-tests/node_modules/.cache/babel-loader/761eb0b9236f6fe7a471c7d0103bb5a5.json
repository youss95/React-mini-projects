{"ast":null,"code":"import { createAction, handleActions } from \"redux-actions\";\nconst LOGIN = \"auth/login\";\nconst LOGOUT = \"auth/logout\";\nconst isLoggedIn = !!localStorage.getItem(\"token\");\nconst initialState = {\n  token: \"\",\n  isLoggedIn: isLoggedIn\n};\n\nconst calculateTime = time => {\n  const currentTime = new Date().getTime();\n  const adjTime = new Date(time).getTime();\n  const remainTime = adjTime - currentTime;\n  return remainTime;\n};\n\nexport const logoutTest = createAction(LOGOUT, () => {\n  localStorage.removeItem(\"token\");\n  return !!localStorage.getItem(\"token\");\n});\nexport const loginTest = createAction(LOGIN, (token, time) => {\n  localStorage.setItem(\"token\", token);\n  const remainTime = calculateTime(time);\n  setTimeout(logoutTest, 3000);\n  return token;\n});\nconst auth = handleActions({\n  [LOGIN]: (state, action) => ({ ...state,\n    token: action.payload,\n    isLoggedIn: !!action.payload\n  }),\n  [LOGOUT]: (state, action) => ({ ...state,\n    token: \"\",\n    isLoggedIn: false\n  })\n}, initialState);\nexport default auth;","map":{"version":3,"names":["createAction","handleActions","LOGIN","LOGOUT","isLoggedIn","localStorage","getItem","initialState","token","calculateTime","time","currentTime","Date","getTime","adjTime","remainTime","logoutTest","removeItem","loginTest","setItem","setTimeout","auth","state","action","payload"],"sources":["/Users/sayongkim/Documents/react-projects/auth-tests/src/moduels/auth.js"],"sourcesContent":["import { createAction, handleActions } from \"redux-actions\";\nconst LOGIN = \"auth/login\";\nconst LOGOUT = \"auth/logout\";\nconst isLoggedIn = !!localStorage.getItem(\"token\");\nconst initialState = {\n  token: \"\",\n  isLoggedIn: isLoggedIn,\n};\nconst calculateTime = (time) => {\n  const currentTime = new Date().getTime();\n  const adjTime = new Date(time).getTime();\n  const remainTime = adjTime - currentTime;\n\n  return remainTime;\n};\nexport const logoutTest = createAction(LOGOUT, () => {\n  localStorage.removeItem(\"token\");\n  return !!localStorage.getItem(\"token\");\n});\n\nexport const loginTest = createAction(LOGIN, (token, time) => {\n  localStorage.setItem(\"token\", token);\n  const remainTime = calculateTime(time);\n  setTimeout(logoutTest, 3000);\n  return token;\n});\n\nconst auth = handleActions(\n  {\n    [LOGIN]: (state, action) => ({\n      ...state,\n      token: action.payload,\n      isLoggedIn: !!action.payload,\n    }),\n    [LOGOUT]: (state, action) => ({\n      ...state,\n      token: \"\",\n      isLoggedIn: false,\n    }),\n  },\n  initialState\n);\n\nexport default auth;\n"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,aAAvB,QAA4C,eAA5C;AACA,MAAMC,KAAK,GAAG,YAAd;AACA,MAAMC,MAAM,GAAG,aAAf;AACA,MAAMC,UAAU,GAAG,CAAC,CAACC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAArB;AACA,MAAMC,YAAY,GAAG;EACnBC,KAAK,EAAE,EADY;EAEnBJ,UAAU,EAAEA;AAFO,CAArB;;AAIA,MAAMK,aAAa,GAAIC,IAAD,IAAU;EAC9B,MAAMC,WAAW,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAApB;EACA,MAAMC,OAAO,GAAG,IAAIF,IAAJ,CAASF,IAAT,EAAeG,OAAf,EAAhB;EACA,MAAME,UAAU,GAAGD,OAAO,GAAGH,WAA7B;EAEA,OAAOI,UAAP;AACD,CAND;;AAOA,OAAO,MAAMC,UAAU,GAAGhB,YAAY,CAACG,MAAD,EAAS,MAAM;EACnDE,YAAY,CAACY,UAAb,CAAwB,OAAxB;EACA,OAAO,CAAC,CAACZ,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAT;AACD,CAHqC,CAA/B;AAKP,OAAO,MAAMY,SAAS,GAAGlB,YAAY,CAACE,KAAD,EAAQ,CAACM,KAAD,EAAQE,IAAR,KAAiB;EAC5DL,YAAY,CAACc,OAAb,CAAqB,OAArB,EAA8BX,KAA9B;EACA,MAAMO,UAAU,GAAGN,aAAa,CAACC,IAAD,CAAhC;EACAU,UAAU,CAACJ,UAAD,EAAa,IAAb,CAAV;EACA,OAAOR,KAAP;AACD,CALoC,CAA9B;AAOP,MAAMa,IAAI,GAAGpB,aAAa,CACxB;EACE,CAACC,KAAD,GAAS,CAACoB,KAAD,EAAQC,MAAR,MAAoB,EAC3B,GAAGD,KADwB;IAE3Bd,KAAK,EAAEe,MAAM,CAACC,OAFa;IAG3BpB,UAAU,EAAE,CAAC,CAACmB,MAAM,CAACC;EAHM,CAApB,CADX;EAME,CAACrB,MAAD,GAAU,CAACmB,KAAD,EAAQC,MAAR,MAAoB,EAC5B,GAAGD,KADyB;IAE5Bd,KAAK,EAAE,EAFqB;IAG5BJ,UAAU,EAAE;EAHgB,CAApB;AANZ,CADwB,EAaxBG,YAbwB,CAA1B;AAgBA,eAAec,IAAf"},"metadata":{},"sourceType":"module"}